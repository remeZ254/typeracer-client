<main class="card" *ngIf="room$ | async as room">
  <p>room {{ room.id }}</p>

  <div class="player" *ngFor="let player of room.players">
    <div class="track">
      <div class="racer" [style.--progress]="player.wordIndex / room.text.quote.length || 0">
        <div class="name-container">
          {{ player.nickName }}
        </div>
        <img class="car" src="assets/svg/cars/car.svg" alt="car" />
      </div>
    </div>
    <div class="score">
      <span class="vertical-center"></span>
      <span>{{ player.wpm }} wpm</span>
    </div>
  </div>

  <div class="quote">
    <span class="completed">{{ quoteDisplay.completed.rest }}</span>
    <span class="completed in-progress">{{ quoteDisplay.completed.inProgress }}</span>
    <span class="invalid in-progress" *ngIf="isInvalid">{{ quoteDisplay.invalid.inProgress }}</span>
    <span class="in-progress">{{ quoteDisplay.valid.inProgress }}</span>
    <span class="invalid" *ngIf="isInvalid">{{ quoteDisplay.invalid.rest }}</span>
    <span>{{ quoteDisplay.valid.rest }}</span>
  </div>

  <div class="input-container">
    <input
      type="text"
      class="input"
      spellcheck="false"
      [class.error]="isInvalid"
      [(ngModel)]="input"
      (input)="onInput()"
    />
  </div>
</main>
